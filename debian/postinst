#!/bin/sh

set -e

case "$1" in
    configure)
        
	# Configure sshd to check status of ssh connections
	if [ -f /usr/sbin/nsm_server_configure_sshd ]; then
		chmod +x /usr/sbin/nsm_server_configure_sshd
		/usr/sbin/nsm_server_configure_sshd || echo "Error running nsm_server_configure_sshd."
	fi

	# Avoid checking for new versions of Ubuntu
	FILE="/etc/update-manager/release-upgrades"
	[ -f $FILE ] && sed -i 's|^Prompt=.*$|Prompt=never|g' $FILE || echo "Unable to access $FILE."
	FILE="/var/lib/update-notifier/release-upgrade-available"
	[ -f $FILE ] && rm -f $FILE
	
	# Make scripts executable
	chmod +x /usr/sbin/so-snorby-wipe /usr/sbin/so-bro-cron
	
	# create log directory so cron scripts don't complain
	DIR="/var/log/nsm"
	[ -d $DIR ] || mkdir -p $DIR
    ;;

    abort-upgrade|abort-remove|abort-deconfigure)
    ;;


    *)
        echo "postinst called with unknown argument \`$1'" >&2
        exit 1
    ;;
esac

# dh_installdeb will replace this with shell code automatically
# generated by other debhelper scripts.

#DEBHELPER#

exit 0
